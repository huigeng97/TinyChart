<!DOCTYPE html>
<meta charset="utf-8">
<style>
    .button {
        background-color: #4CAF50; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
    }

    .button1 {color: black; background-color: darkgray;}
    /*.button2 {width: 50%;}*/
    /*.button3 {width: 100%;}*/
</style>
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>


<button class="button" onclick="myFunction('20px',500)">500px * 500px</button>
<button class="button" onclick="myFunction('20px',400)">400px * 400px</button>
<button class="button" onclick="myFunction('15px',300)">300px * 300px</button>
<button class="button" onclick="myFunction('10px',200)">200px * 200px</button>
<button class="button" onclick="myFunction('8px',100)">100px * 100px</button>

<div>
    <button class="button button1" onclick="uploadDate()">Upload data</button>
</div>

<div>
    <label for="data">Choose a data:</label>
    <select id="data" name="datalist" form="dataform">
        <option value="data1">Data1</option>
        <option value="data2">Data2</option>
        <option value="data3">Data3</option>
        <option value="data4">Data4</option>
        <option value="data5">Data5</option>
    </select>

    <form action="/action_page.php" id="dataform">
        <input type="submit">
    </form>
</div>

<script>


  function myFunction(dim, intDim) {

    // set the dimensions and margins of the graph
    var margin = {top: 10, right: 10, bottom: 10, left: 10},
      width = intDim - margin.left - margin.right,
      height = intDim - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
      "translate(" + margin.left + "," + margin.top + ")");

    // read json data
    d3.json("http://localhost:8000/data", function(data) {

      // Give the data to this cluster layout:
      var root = d3.hierarchy(data).sum(function(d){ return d.value}) // Here the size of each leave is given in the 'value' field in input data

      // Then d3.treemap computes the position of each element of the hierarchy
      d3.treemap()
      .size([width, height])
      .padding(2)
      (root)

      // use this information to add rectangles:
      svg
      .selectAll("rect")
      .data(root.leaves())
      .enter()
      .append("rect")
      .attr('x', function (d) { return d.x0; })
      .attr('y', function (d) { return d.y0; })
      .attr('width', function (d) { return d.x1 - d.x0; })
      .attr('height', function (d) { return d.y1 - d.y0; })
      .style("stroke", "black")
      .style("fill", "slateblue")

      // and to add the text labels
      svg
      .selectAll("text")
      .data(root.leaves())
      .enter()
      .append("text")
      .attr("x", function(d){ return d.x0+5})    // +10 to adjust position (more right)
        .attr("y", function(d){ return d.y0+20})    // +20 to adjust position (lower)
        .text(function(d){ return d.data.name })
        .attr("font-size", dim)
      .attr("fill", "white")
    })
  }
</script>